@page "/api/wallet/balance"
@using BiketaBai.Helpers
@using BiketaBai.Services
@inject WalletService WalletService
@{
    Layout = null;
    
    var userId = AuthHelper.GetCurrentUserId(User);
    if (userId.HasValue)
    {
        var balance = await WalletService.GetBalanceAsync(userId.Value);
        
        Response.ContentType = "application/json";
        await Response.WriteAsync(System.Text.Json.JsonSerializer.Serialize(new { balance }));
    }
    else
    {
        Response.StatusCode = 401;
        Response.ContentType = "application/json";
        await Response.WriteAsync(System.Text.Json.JsonSerializer.Serialize(new { error = "Unauthorized" }));
    }
}

